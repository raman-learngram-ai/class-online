(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{120:function(e,t,a){},142:function(e,t,a){},143:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(87),l=a.n(s),o=(a(97),a(29)),c=a(31),i=a(30),u=a(16),m=a(17),p=a(19),d=a(18),g=a(20),h=a(151),b=a(152),v=a(153),f=a(154),E=a(155),O=a(156),j=a(157),y=a(158),C=a(2),S=a.n(C),w=a(15),N=a.n(w),k=a(25),x=a(148),I=a(149),M=a(150),P=a(144),D=a(145),B=a(146),F=function(e){var t=e.email,a=e.handleInputChange;return r.a.createElement(P.a,null,r.a.createElement(D.a,{className:"input-label"},"Email"),r.a.createElement(B.a,{type:"email",name:"email",className:"input-field",placeholder:"Please enter your email",value:t,onChange:function(e){return a(e.target.name,e.target.value)},required:!0}))},A=function(e){var t=e.password,a=e.handleInputChange;return r.a.createElement(P.a,null,r.a.createElement(D.a,{className:"input-label"},"Password"),r.a.createElement(B.a,{type:"password",name:"password",className:"input-field",placeholder:"Please enter your password",value:t,onChange:function(e){return a(e.target.name,e.target.value)},required:!0}))},T=a(147),V=function(e){var t=e.serverMessage;return r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement(T.a,{color:"danger",className:"text-center"},t))},H=a(43),R=a(44),U=a.n(R),z=function(){var e=Object(k.a)(N.a.mark((function e(t,a){var n,r,s,l,o,c,i,u,m,p=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=p.length>2&&void 0!==p[2]&&p[2],r=p.length>3&&void 0!==p[3]?p[3]:{},s=p.length>4&&void 0!==p[4]&&p[4],l=p.length>5?p[5]:void 0,t&&a){e.next=6;break}return e.abrupt("return",{error:!0,logout:!1,message:"Something went wrong. Please try again."});case 6:if("GET"===t||"POST"===t){e.next=8;break}return e.abrupt("return",{error:!0,logout:!1,message:"Something went wrong. Please try again."});case 8:if(o={},i="",!n){e.next=16;break}if(u=localStorage.getItem("jwt"),i="Bearer ".concat(u)){e.next=15;break}return e.abrupt("return",{error:!0,logout:!0,message:"You have been logged out. Please login again."});case 15:o.Authorization=i;case 16:if(s?(o["Content-Type"]="multipart/form-data",c=new FormData,Object.keys(r).forEach((function(e){c.append(e,r[e])}))):c=Object(H.a)({},r),e.prev=17,"POST"!==t){e.next=24;break}return e.next=21,U.a.post("/".concat(a),c,{headers:o,onUploadProgress:l});case 21:m=e.sent,e.next=28;break;case 24:if("GET"!==t){e.next=28;break}return e.next=27,U.a.get("/".concat(a),Object(H.a)({},c,{headers:o}));case 27:m=e.sent;case 28:return e.abrupt("return",{error:!1,logout:!1,message:m.data.message,response:m.data});case 31:if(e.prev=31,e.t0=e.catch(17),!e.t0.response||!e.t0.response.data){e.next=38;break}if(401!==e.t0.response.status){e.next=37;break}return localStorage.removeItem("jwt"),e.abrupt("return",{error:!0,logout:!0,message:"You have been logged out. Please login again."});case 37:return e.abrupt("return",{error:!0,logout:!1,message:e.t0.response.data.message});case 38:if(!e.t0.message||!e.t0.message.includes("Network Error")){e.next=40;break}return e.abrupt("return",{error:!0,logout:!1,message:"You are not connected to the internet. Please connect and try again."});case 40:return e.abrupt("return",{error:!0,logout:!1,message:"Something went wrong. Please try again."});case 41:case"end":return e.stop()}}),e,null,[[17,31]])})));return function(t,a){return e.apply(this,arguments)}}(),G=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={submitButtonDisabled:!1},a.submitHandler=function(){var e=Object(k.a)(N.a.mark((function e(t){var n,r,s,l;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a.setState({submitButtonDisabled:!0}),n=a.props,r=n.email,s=n.password,e.next=5,z("POST","api/v1/user/login",!1,{email:r,password:s});case 5:if((l=e.sent).error){e.next=10;break}return localStorage.setItem("jwt",l.response.jwt),a.props.history.push("/"),e.abrupt("return");case 10:a.props.handleInputChange("loginServerMessage",l.message),a.setState({submitButtonDisabled:!1});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleInputChange=function(e,t){a.props.handleInputChange(e,t)},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.state.submitButtonDisabled,t=this.props,a=t.email,n=t.password,s=t.serverMessage;return r.a.createElement(x.a,null,r.a.createElement("div",{className:"padded-card-body"},r.a.createElement(I.a,{onSubmit:this.submitHandler},r.a.createElement(F,{email:a,handleInputChange:this.handleInputChange}),r.a.createElement("br",null),r.a.createElement(A,{password:n,handleInputChange:this.handleInputChange}),r.a.createElement("br",null),r.a.createElement("div",{className:"submit-button-outer"},r.a.createElement(M.a,{className:"submit-button",size:"lg",disabled:e},"LOG IN")),s&&r.a.createElement(V,{serverMessage:s}))))}}]),t}(n.Component),L=Object(c.f)(G),q=function(e){var t=e.validationMessages,a=e.validations;return r.a.createElement("div",{className:"validation-messages"},t.map((function(e,t){return r.a.createElement("div",{className:"validation-message",key:t},r.a.createElement("span",{className:"fa-stack",style:{verticalAlign:"top"}},r.a.createElement("i",{className:"fas fa-circle fa-stack-1x"}),a[t]?r.a.createElement("i",{className:"fas fa-check-circle fa-stack-1x"}):r.a.createElement("i",{className:"fas fa-times-circle fa-stack-1x"})),r.a.createElement("p",null,e))})))},Y=function(e){var t=e.otp,a=e.handleInputChange;return r.a.createElement(P.a,null,r.a.createElement(D.a,{className:"input-label"},"OTP"),r.a.createElement(B.a,{type:"text",name:"otp",className:"input-field",placeholder:"Please enter OTP send to your email",value:t,onChange:function(e){return a(e.target.name,e.target.value)},required:!0}))},J=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={step:"signup",submitButtonDisabled:!1,validationMessagesComponent:!1,validations:[!1,!1,!1,!1]},a.submitHandler=function(){var e=Object(k.a)(N.a.mark((function e(t){var n,r,s,l,o,c,i,u,m,p,d;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a.setState({submitButtonDisabled:!0}),n=a.state.step,r=a.props,s=r.email,l=r.password,o=r.otp,"otp"!==n){e.next=15;break}return e.next=7,z("POST","api/v1/user/verifyotp",!1,{email:s,otp:o});case 7:if((c=e.sent).error){e.next=12;break}return localStorage.setItem("jwt",c.response.jwt),a.props.history.push("/"),e.abrupt("return");case 12:return a.props.handleInputChange("signupServerMessage",c.message),a.setState({submitButtonDisabled:!1}),e.abrupt("return");case 15:if(u=/[A-Z]/,m=/[a-z]/,p=/\d/,(i=[!1,!1,!1,!1])[0]=l.length>=8,i[1]=u.test(l),i[2]=m.test(l),i[3]=p.test(l),!i.includes(!1)){e.next=26;break}return a.setState({submitButtonDisabled:!1,validationMessagesComponent:!0,validations:i}),e.abrupt("return");case 26:return e.next=28,z("POST","api/v1/user/signup",!1,{email:s,password:l});case 28:(d=e.sent).error||a.setState({step:"otp"}),a.props.handleInputChange("signupServerMessage",d.message),a.setState({submitButtonDisabled:!1});case 32:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleInputChange=function(e,t){a.state.validationMessagesComponent&&a.setState({validationMessagesComponent:!1}),a.props.handleInputChange(e,t)},a.validationMessages=["Password should be min 8 chars","At least 1 uppercase letter [A-Z]","At least 1 lowercase letter [a-z]","At least 1 numeric char [0-9]"],a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.state,t=e.step,a=e.submitButtonDisabled,n=e.validationMessagesComponent,s=e.validations,l=this.props,o=l.email,c=l.password,i=l.otp,u=l.serverMessage;return r.a.createElement(x.a,null,r.a.createElement("div",{className:"padded-card-body"},r.a.createElement(I.a,{onSubmit:this.submitHandler},"signup"===t&&r.a.createElement(r.a.Fragment,null,r.a.createElement(F,{email:o,handleInputChange:this.handleInputChange}),r.a.createElement("br",null),r.a.createElement(A,{password:c,handleInputChange:this.handleInputChange})),"otp"===t&&r.a.createElement(Y,{otp:i,handleInputChange:this.handleInputChange}),r.a.createElement("br",null),!n&&r.a.createElement("div",{className:"submit-button-outer"},r.a.createElement(M.a,{className:"submit-button",size:"lg",disabled:a},"SIGN UP")),n&&r.a.createElement(q,{validationMessages:this.validationMessages,validations:s}),u&&r.a.createElement(V,{serverMessage:u}))))}}]),t}(n.Component),Z=Object(c.f)(J),K=(a(120),function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={activeTab:"login",email:"",password:"",otp:"",loginServerMessage:"",signupServerMessage:""},a.tabClickHandler=function(e){a.props.history.push("/".concat(e))},a.handleInputChange=function(e,t){a.setState(Object(i.a)({},e,t))},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.match.path.includes("signup")&&this.setState({activeTab:""}),localStorage.getItem("jwt")&&this.props.history.push("/")}},{key:"render",value:function(){var e=this,t=this.state,a=t.email,n=t.password,s=t.otp,l=t.loginServerMessage,o=t.signupServerMessage,c=this.props.match.path.includes("signup")?"signup":"login";return r.a.createElement("div",{className:"background-image"},r.a.createElement(h.a,null,r.a.createElement(b.a,{md:"6",sm:"12"},r.a.createElement(h.a,null,r.a.createElement(b.a,{sm:"1"}),r.a.createElement(b.a,{sm:"11"},r.a.createElement("div",{className:"signup-box"},r.a.createElement("h1",{className:"text-center brand-name"},"ClassOnline"),r.a.createElement("br",null),r.a.createElement(v.a,null,r.a.createElement(f.a,{tabs:!0},r.a.createElement(E.a,null,r.a.createElement(O.a,{className:S()({active:"login"===c}),onClick:function(){return e.tabClickHandler("login")}},"Log In")),r.a.createElement(E.a,null,r.a.createElement(O.a,{className:S()({active:"signup"===c}),onClick:function(){return e.tabClickHandler("signup")}},"Sign Up"))),r.a.createElement(j.a,{activeTab:c},r.a.createElement(y.a,{tabId:"login"},r.a.createElement(L,{handleInputChange:this.handleInputChange,email:a,password:n,serverMessage:l})),r.a.createElement(y.a,{tabId:"signup"},r.a.createElement(Z,{handleInputChange:this.handleInputChange,email:a,password:n,otp:s,serverMessage:o}))))))))))}}]),t}(n.Component)),Q=Object(c.f)(K),W=a(159),X=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).logoutHandler=function(){localStorage.removeItem("jwt"),a.props.history.push("/login")},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{fluid:!0},r.a.createElement("div",{className:"video-dashboard-header"},r.a.createElement("h2",{className:"class-name"},"Example Class"),r.a.createElement(M.a,{className:"float-right logout-button",onClick:this.logoutHandler},"Logout"))),r.a.createElement("hr",{className:"my-1"}))}}]),t}(n.Component),$=Object(c.f)(X),_=a(160),ee=function(e){var t=e.percentage,a=e.uploadDone;return r.a.createElement(r.a.Fragment,null,r.a.createElement(_.a,{animated:!a,striped:a,color:"success",value:t},t,"%"))},te=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={file:null,fileName:"Choose video...",customFileName:"",uploadProgress:!1,uploadButtonDisabled:!1,uploadPercentage:0,uploadDone:!1,userMessage:"",userMessageColor:"danger"},a.onVideoChange=function(e){if(e.target.files.length){var t=e.target.files[0];a.setState({file:t,fileName:t.name,customFileName:""})}else a.setState({file:null,fileName:"Choose video...",customFileName:""})},a.handleInputChange=function(e,t){a.setState(Object(i.a)({},e,t))},a.uploadProgressEventHandler=function(e){a.setState({uploadPercentage:Math.round(100*e.loaded/e.total)})},a.handleUploadVideo=function(){var e=Object(k.a)(N.a.mark((function e(t){var n,r,s,l;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a.setState({uploadButtonDisabled:!0}),n=a.state,r=n.file,s=n.customFileName,r){e.next=6;break}return a.setState({uploadButtonDisabled:!1}),e.abrupt("return");case 6:return a.setState({uploadProgress:!0,userMessage:"Please wait... upload video in progress...",userMessageColor:"success"}),e.next=9,z("POST","api/v1/video/upload",!0,{file:r,customFileName:s},!0,a.uploadProgressEventHandler);case 9:(l=e.sent).logout&&a.props.history.push("/"),l.error?a.setState({userMessage:l.message,userMessageColor:"danger"}):(a.setState({userMessage:l.message}),a.props.changeRootState("videos",l.response.videos),a.props.changeRootState("currentVideo",l.response.video)),a.setState({uploadButtonDisabled:!1,uploadDone:!0});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.fileName,n=t.customFileName,s=t.uploadProgress,l=t.uploadDone,o=t.uploadButtonDisabled,c=t.uploadPercentage,i=t.userMessage,u=t.userMessageColor;return r.a.createElement(W.a,{className:"video-uploader mt-5"},r.a.createElement(I.a,{onSubmit:this.handleUploadVideo},r.a.createElement(h.a,null,r.a.createElement(b.a,{md:"5",sm:"12"},r.a.createElement("div",{className:"custom-file"},r.a.createElement(P.a,null,r.a.createElement(B.a,{type:"file",className:"custom-file-input",id:"videoFile",accept:"video/mp4,video/x-m4v,video/*",onChange:this.onVideoChange}),r.a.createElement(D.a,{className:"custom-file-label",for:"videoFile"},a)))),r.a.createElement(b.a,{md:"4",sm:"8"},r.a.createElement(B.a,{type:"text",name:"customFileName",value:n,onChange:function(t){return e.handleInputChange(t.target.name,t.target.value)},placeholder:"Custom file name if any..."})),r.a.createElement(b.a,{md:"3",sm:"4"},r.a.createElement(M.a,{type:"submit",className:"upload-button",disabled:o},"Upload Lecture"))),i&&r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement(T.a,{color:u,className:"text-center"},i))),s&&r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement(ee,{percentage:c,uploadDone:l})))}}]),t}(n.Component),ae=Object(c.f)(te),ne=a(47),re=(a(141),function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.currentVideo;return r.a.createElement(W.a,{className:"mt-5"},r.a.createElement(ne.Player,{playsInline:!0,src:e.location},r.a.createElement(ne.BigPlayButton,{position:"center"})),r.a.createElement("h2",{className:"current-video-name"},e.fileName))}}]),t}(n.Component)),se=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.props.videos;return r.a.createElement(W.a,{className:"mt-4"},0===t.length&&r.a.createElement("h1",{className:"text-center"},"It is empty here. Please upload a video."),r.a.createElement(h.a,null,t.map((function(t){return r.a.createElement(b.a,{lg:"4",md:"6",sm:"12"},r.a.createElement(v.a,{className:"video-thumbnail-card",onClick:function(){return e.props.changeRootState("currentVideo",t)}},r.a.createElement("p",null,t.fileName),r.a.createElement("i",{className:"fas fa-play"})))}))))}}]),t}(n.Component),le=(a(142),function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={videos:[],currentVideo:{}},a.getAllVideos=Object(k.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z("GET","api/v1/video/videos",!0);case 2:if(!(t=e.sent).logout){e.next=6;break}return a.props.history.push("/login"),e.abrupt("return");case 6:if(!t.error){e.next=8;break}return e.abrupt("return");case 8:a.setState({videos:t.response.videos}),t.response.videos.length&&a.setState({currentVideo:t.response.videos[0]});case 10:case"end":return e.stop()}}),e)}))),a.changeRootState=function(e,t){a.setState(Object(i.a)({},e,t))},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(k.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.getItem("jwt")){e.next=4;break}return this.props.history.push("/login"),e.abrupt("return");case 4:return e.next=6,this.getAllVideos();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.currentVideo,a=e.videos;e.spinner;return r.a.createElement(r.a.Fragment,null,r.a.createElement($,null),r.a.createElement(ae,{changeRootState:this.changeRootState}),t&&t.location&&r.a.createElement(re,{currentVideo:t}),r.a.createElement(se,{videos:a,changeRootState:this.changeRootState}))}}]),t}(n.Component)),oe=Object(c.f)(le),ce=function(){return r.a.createElement(o.a,null,r.a.createElement(c.c,null,r.a.createElement(c.a,{exact:!0,path:"/login"},r.a.createElement(Q,null)),r.a.createElement(c.a,{exact:!0,path:"/signup"},r.a.createElement(Q,null)),r.a.createElement(c.a,{exact:!0,path:"/"},r.a.createElement(oe,null)),r.a.createElement(c.a,{path:"*"},r.a.createElement(Q,null))))};l.a.render(r.a.createElement(ce,null),document.getElementById("root"))},92:function(e,t,a){e.exports=a(143)}},[[92,1,2]]]);
//# sourceMappingURL=main.f2646b62.chunk.js.map